
# –ù–µ–º–Ω–æ–≥–æ –º–∞–≥–∏–∏ –¥–ª—è RSpec-—Ç–µ—Å—Ç–æ–≤

<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [–ß—Ç–æ —ç—Ç–æ?](#—á—Ç–æ-—ç—Ç–æ)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–§–∏—á–∏](#—Ñ–∏—á–∏)
  - [`alias_method`](#alias_method)
  - [`context_when`](#context_when)
  - [`described_sym`](#described_sym)
  - [`include_dir_context`](#include_dir_context)
  - [`use_letset`](#use_letset)
  - [`use_method_discovery`](#use_method_discovery)
- [–ü–æ–¥—Ä–æ–±–Ω–æ](#–ø–æ–¥—Ä–æ–±–Ω–æ)
  - [–ü—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∫—É](#–ø—Ä–æ-—É—Å—Ç–∞–Ω–æ–≤–∫—É)
  - [–ü—Ä–æ `context_when`](#–ø—Ä–æ-context_when)
  - [–ü—Ä–æ `include_dir_context`](#–ø—Ä–æ-include_dir_context)
- [Copyright](#copyright)

<!-- /code_chunk_output -->

## –ß—Ç–æ —ç—Ç–æ?

üÜé *An English version of this text is also available: [README.md](README.md).*

RSpecMagic ‚Äî –Ω–∞–±–æ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã—Ö –∏ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

> üí° *–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ RSpec –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏.*

–î–æ–±–∞–≤–ª—è–µ–º –≤ `Gemfile`:

```ruby
gem "rspec_magic"
#gem "rspec_magic", git: "https://github.com/dadooda/rspec_magic"
```

–î–æ–±–∞–≤–ª—è–µ–º –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É RSpec (–æ–±—ã—á–Ω–æ —ç—Ç–æ `spec/spec_helper.rb`):

```ruby
require "rspec_magic/stable"
require "rspec_magic/unstable"

RSpecMagic::Config.spec_path = File.expand_path(".", __dir__)
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `spec_path` –Ω—É–∂–Ω–∞ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ–∏—á, –Ω–∞–ø—Ä–∏–º–µ—Ä, [include_dir_context](#include_dir_context).
–í—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –ø—É—Ç—å –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ `spec/` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

–°–º. [–ü–æ–¥—Ä–æ–±–Ω–æ](#–ø—Ä–æ-—É—Å—Ç–∞–Ω–æ–≤–∫—É).

## –§–∏—á–∏

### `alias_method`

Matcher, —Å–≤–µ—Ä—è—é—â–∏–π, —á—Ç–æ –º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è alias'–æ–º –¥—Ä—É–≥–æ–≥–æ –º–µ—Ç–æ–¥–∞.

```ruby
describe User do
  it { is_expected.to alias_method(:admin?, :is_admin) }
end
```

### `context_when`

–°–æ–∑–¥–∞—ë–º —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∑–∞–¥–∞—é—â–∏–π –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ `let`-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
–ë–ª–æ–∫–∏ –Ω–∏–∂–µ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã.

```ruby
context_when name: "Joe", age: 25 do
  it do
    expect([name, age]).to eq ["Joe", 25]
  end
end
```

```ruby
context "when { name: \"Joe\", age: 25 }" do
  let(:name) { "Joe" }
  let(:age) { 25 }
  it do
    expect([name, age]).to eq ["Joe", 25]
  end
end
```

–°–º. [–ü–æ–¥—Ä–æ–±–Ω–æ](#–ø—Ä–æ-context_when).

### `described_sym`

`described_sym` –∏ `me` ‚Äî –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ `described_class` –≤ –≤–∏–¥–µ `Symbol`.
–ü–æ–º–æ–≥–∞–µ—Ç –Ω–µ ¬´–¥–æ–ª–¥–æ–Ω–∏—Ç—å¬ª –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–ª–∞—Å—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä,
–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π —Å –ø–æ–º–æ—â—å—é factory.

```ruby
describe UserProfile do
  it { expect(described_sym).to eq :user_profile }
  it { expect(me).to eq :user_profile }
end
```

–° factory:

```ruby
describe UserProfile do
  let(:uprof1) { create described_sym }
  let(:uprof2) { create me }
  ‚Ä¶
end
```

### `include_dir_context`

‚ôíÔ∏é *–≠—Ç–∞ —Ñ–∏—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–µ–¥–∞–≤–Ω–æ –∏ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è.*

–û—Ä–≥–∞–Ω–∏–∑—É–µ–º –æ–±—â–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã ([shared_context](https://rspec.info/features/3-12/rspec-core/example-groups/shared-context/)) –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏.
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ–º –Ω—É–∂–Ω—ã–µ –æ–±—â–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤ –Ω–∞—à —Ç–µ—Å—Ç.

–®–∞–≥–∏:

1. –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ `RSpecMagic::Config.spec_path`.
   –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ `spec/`.

2. –ü–æ —Ñ–∞–π–ª–æ–≤–æ–º—É –¥–µ—Ä–µ–≤—É —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª—ã –æ–±—â–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ *—Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º,* –Ω–∞–ø—Ä–∏–º–µ—Ä, `_context.rb`.
   –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `_context.rb` –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –≤–∏–¥:

    ```ruby
    shared_context __dir__ do
      ‚Ä¶
    end
    ```

3. –î–æ–±–∞–≤–ª—è–µ–º –≤ —É—Å–ª–æ–≤–Ω—ã–π `spec_helper.rb`:

    ```ruby
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—é shared contexts.
    Dir[File.expand_path("**/_context.rb", __dir__)].each { |fn| require fn }
    ```

4. –í spec-—Ñ–∞–π–ª–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤—ã–∑–æ–≤ `include_dir_context` –≤ —Ç–µ–ª–æ –≥–ª–∞–≤–Ω–æ–≥–æ `describe`:

    ```ruby
    describe ‚Ä¶ do
      include_dir_context __dir__
      ‚Ä¶
    end
    ```

–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—à spec-—Ñ–∞–π–ª —ç—Ç–æ `spec/app/controllers/api/player_controller_spec.rb`.

–í –≥–ª–∞–≤–Ω—ã–π `describe` –±—É–¥—É—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, *–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å,* –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏–∑ —Ñ–∞–π–ª–æ–≤:

```
spec/_context.rb
spec/app/_context.rb
spec/app/controllers/_context.rb
spec/app/controllers/api/_context.rb
```

–°–º. [–ü–æ–¥—Ä–æ–±–Ω–æ](#–ø—Ä–æ-include_dir_context).

### `use_letset`

–°–æ–∑–¥–∞—ë–º –Ω–∞ —É—Ä–æ–≤–Ω–µ `describe` –º–µ—Ç–æ–¥ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è `let`-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ç–∏–ø–∞ `Hash`.

```ruby
describe do
  # –ú–µ—Ç–æ–¥ -- `let_a`. –ö–æ–ª–ª–µ–∫—Ü–∏—è -- `attrs`.
  use_letset :let_a, :attrs

  # –î–µ–∫–ª–∞—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é `attrs`.
  let_a(:age)
  let_a(:name)

  subject { attrs }

  # –ù–∏ –æ–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–∫–∞ –Ω–µ –∑–∞–¥–∞–Ω–∞, –ø–æ—ç—Ç–æ–º—É –∫–æ–ª–ª–µ–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π.
  it { is_expected.to eq({}) }

  # –ó–∞–¥–∞—ë–º `name` –∏ –≤–∏–¥–∏–º –µ–≥–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
  context_when name: "Joe" do
    it { is_expected.to eq(name: "Joe") }

    # –ó–∞–¥–∞—ë–º `age` –∏ –≤–∏–¥–∏–º –æ–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
    context_when age: 25 do
      it { is_expected.to eq(name: "Joe", age: 25) }
    end
  end
end
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –±–ª–æ–∫, `let_a` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π `let`. –¢–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑—Ä–µ–¥–∫–∞ —Ç–æ–∂–µ –±—ã–≤–∞–µ—Ç –ø–æ–ª–µ–∑–µ–Ω:

```ruby
describe do
  use_letset :let_a, :attrs

  let_a(:age) { 25 }
  let_a(:name) { "Joe" }

  it { expect(attrs).to eq(name: "Joe", age: 25) }
end
```

### `use_method_discovery`

–°–æ–∑–¥–∞—ë–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é `let`-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∏–º—è –º–µ—Ç–æ–¥–∞ –∏–ª–∏ action,
–≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ `describe`.

```ruby
describe do
  use_method_discovery :m

  subject { m }

  describe "#first_name" do
    it { is_expected.to eq :first_name }
  end

  describe ".some_stuff" do
    it { is_expected.to eq :some_stuff }
  end

  describe "GET some_action" do
    describe "intermediate context" do
      it { is_expected.to eq :some_action }   # (1)
    end
  end
end
```

`m` –Ω–∞—Ö–æ–¥–∏—Ç –±–ª–∏–∂–∞–π—à–∏–π *–ø–æ–¥—Ö–æ–¥—è—â–∏–π* –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ñ–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ø—É—Å–∫–∞–µ—Ç –≤—ã–µ–º–∫—É –∏–º–µ–Ω–∏ –º–µ—Ç–æ–¥–∞.
–°–º. (1) ‚Äî `m` –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∞ –≤–æ–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `"intermediate context"` –∏ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
–Ω–∞ `"GET some_action"`.

## –ü–æ–¥—Ä–æ–±–Ω–æ

### –ü—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∫—É

1. `stable` –∏ `unstable` ‚Äî –Ω–∞–±–æ—Ä—ã —Ñ–∏—á. –í –Ω–∞–±–æ—Ä `unstable` –≤—Ö–æ–¥—è—Ç —Ñ–∏—á–∏,
   –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–¥–∞–≤–Ω–æ. –û–Ω–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö.

2. –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∏—á–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:

    ```ruby
    require "rspec_magic/stable/use_method_discovery"
    ```

### –ü—Ä–æ `context_when`

1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –ø—Ä–∏–ø–∏—Å–∞–≤ –∫ –Ω–∞—á–∞–ª—É `x`:

    ```ruby
    xcontext_when ‚Ä¶ do
      ‚Ä¶
    end
    ```

2. –ú–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–π –º–µ—Ç–æ–¥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –æ—Ç—á—ë—Ç–∞:

    ```ruby
    describe "‚Ä¶" do
      def self._context_when_formatter(h)
        "when #{h.to_json}"
      end

      context_when ‚Ä¶ do
        ‚Ä¶
      end
    end
    ```

3. `context_when` —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–∞—Ä–µ —Å [use_letset](#use_letset),
   –æ–±—ã—á–Ω–æ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

4. –ó–Ω–∞—á–µ–Ω–∏—è `let`-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ `describe`.
   –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è, –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ `it`, —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π `let(‚Ä¶)¬†{¬†‚Ä¶¬†}` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

### –ü—Ä–æ `include_dir_context`

–ï—Å—Ç—å –≤ RSpec –∫–ª–∞—Å—Å–Ω–∞—è —à—Ç—É–∫–∞ ‚Äî –æ–±—â–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã, –æ–Ω–∏ –∂–µ [shared_context](https://rspec.info/features/3-12/rspec-core/example-groups/shared-context/).
–ó–∞–º—ã—Å–µ–ª –ø—Ä–æ—Å—Ç–æ–π: –≥–¥–µ-—Ç–æ (–≤ —É—Å–ª–æ–≤–Ω–æ–º `spec_helper.rb`) –º—ã —Å–æ–∑–¥–∞—ë–º –Ω–µ—á—Ç–æ –æ–±—â–µ–µ —á–µ—Ä–µ–∑ `shared_context "—Ç–æ —Å—ë"`,
–∞ –ø–æ—Ç–æ–º —á–µ—Ä–µ–∑ `include_context "—Ç–æ —Å—ë"` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª –≤ –Ω—É–∂–Ω—ã–π —Ç–∞–º —Ç–µ—Å—Ç.

–ù–∞–ø–æ–ª–Ω—è—Ç—å `shared_context` –º–æ–∂–Ω–æ —á–µ–º —É–≥–æ–¥–Ω–æ ‚Äî –æ–±—â–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏, `let`-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, *–Ω–æ¬†–≥–ª–∞–≤–Ω–æ–µ* ‚Äî
–º–µ—Ç–æ–¥–∞–º–∏ —É—Ä–æ–≤–Ω—è `describe` (`def¬†self.doit`) –∏ –º–µ—Ç–æ–¥–∞–º–∏ —É—Ä–æ–≤–Ω—è `it` (`def¬†doit`).

–ß–µ–º –Ω–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞?

–ö–∞–∑–∞–ª–æ—Å—å –±—ã ‚Äî –≤–æ—Ç –æ–Ω–æ —Å—á–∞—Å—Ç—å—é—à–∫–æ, —Å–æ—á–∏–Ω—è–π —Å–≤–æ–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, —Ä–∞–∑–Ω–æ—Å–∏ –ø–æ –æ–±—â–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º, –≥–¥–µ –Ω–∞–¥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –∏ —Ä–∞–¥—É–π—Å—è.
–ù–æ –µ—Å—Ç—å –Ω–µ–ø—Ä–∏—è—Ç–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: —à—Ç–∞—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –æ—á–µ–Ω—å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã –∏ –æ–ø–∏—Ä–∞—é—Ç—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞.

RSpec –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –æ–±—â–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏,
—á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã-¬´–±–∏–±–ª–∏–æ—Ç–µ–∫–∏¬ª –≤ –≥—Ä—É–ø–ø—ã spec-—Ñ–∞–π–ª–æ–≤, –∫–∞–∫ —Ç–æ:
*–≤—Å–µ–º* —Ç–µ—Å—Ç–∞–º –º–æ–¥–µ–ª–µ–π ‚Äî –æ–¥–Ω–æ, *–≤—Å–µ–º* —Ç–µ—Å—Ç–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ ‚Äî –¥—Ä—É–≥–æ–µ, –∞ *–≤—Å–µ–º* –∏–º –≤–º–µ—Å—Ç–µ ‚Äî —Ç—Ä–µ—Ç—å–µ.

–ß—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–∞–ª–æ-–º–∞–ª—å—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞—Ç—É–∂–Ω–æ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –æ–±—â–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º
—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞, –∏ *–≤ –∫–∞–∂–¥–æ–º* spec-—Ñ–∞–π–ª–µ –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–µ —É–Ω—ã–ª—ã–º –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º—Å—è —Å–ø–∏—Å–∫–æ–º:

```ruby
describe ‚Ä¶ do
  include_context "basic"
  include_context "controllers"
  include_context "api_controllers"
  ‚Ä¶
end
```

–ò —ç—Ç–æ –µ—â—ë –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å.
–ß–∞—â–µ –≤—Å–µ–≥–æ –¥–∞–∂–µ —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞—é—Ç, –∞ –ø—Ä–æ—Å—Ç–æ —Å–≤–∞–ª–∏–≤–∞—é—Ç –≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –∫—É—á—É –∏ –≤–∫–ª—é—á–∞—é—Ç —Å—Ä–∞–∑—É –≤—Å—ë,
–ø—Ä–æ—Å—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ ¬´–Ω–µ–∫–æ–≥–¥–∞ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è¬ª.

–ß—Ç–æ –¥–∞—ë—Ç `include_dir_context`?

1. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –æ–±—â–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏.
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—Ç—å –Ω–∞–±–æ—Ä—ã *—Ç–æ–≥–æ, —á—Ç–æ –Ω—É–∂–Ω–æ, —Ç—É–¥–∞, –∫—É–¥–∞ –Ω—É–∂–Ω–æ.*

–ö–∞–∫ —ç—Ç–æ –¥–µ–ª–∞—Ç—å, –æ–ø–∏—Å–∞–Ω–æ –≤ [–æ—Å–Ω–æ–≤–Ω–æ–π –≥–ª–∞–≤–µ](#include_dir_context).

## Copyright

–ü—Ä–æ–¥—É–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–æ –Ω–∞ —É—Å–ª–æ–≤–∏—è—Ö –ª–∏—Ü–µ–Ω–∑–∏–∏ MIT.

‚Äî ¬© 2017-2024 –ê–ª–µ–∫—Å–µ–π –§–æ—Ä—Ç—É–Ω–∞
